{{ ctf.domain }} {
    reverse_proxy web:3000
    encode gzip zstd

    header {
        X-Role "player"
    }
}

admin.{{ ctf.domain }} {
    reverse_proxy admin:3000
    encode gzip zstd

    header {
        X-Role "admin"
    }
}

api.{{ ctf.domain }} {
    reverse_proxy oxide:3000
    encode gzip zstd
}

static.{{ ctf.domain }} {
    file_server /files {
        root {{ file_storage.path }}
        precompressed {{ file_storage.compress }}
        disable_canonical_uris
    }
}
